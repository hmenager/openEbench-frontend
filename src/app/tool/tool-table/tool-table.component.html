<mat-sidenav-container>
    <mat-sidenav mode="side" opened>
        <!-- <form [formGroup]="search" novalidate> -->

        <!-- <mat-form-field>
            <input matInput placeholder="Filter" value="{{filterValue!=null? filterValue : ''}}" type="text"
              formControlName='text'>

          </mat-form-field> -->
        <!-- <p>
          <mat-form-field appearance="legacy">
            <mat-label>Legacy form field</mat-label>
            <input matInput placeholder="Placeholder">
            <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
            <mat-hint>Hint</mat-hint>
          </mat-form-field>
        </p> -->

        <!-- <mat-form-field>
          <mat-select placeholder="Search in " id="select" formControlName='filter' disableOptionCentering>
            <mat-option *ngFor="let option of options" [value]="option"> {{option}}
            </mat-option>
          </mat-select>
        </mat-form-field> -->

        <!-- <mat-form-field>
          <mat-select placeholder="Type" formControlName="type" multiple matTooltip="Filter by type of tool"
            disableOptionCentering>
            <mat-option *ngFor="let type of typeList" [value]="type" aria-selected="true">{{type | uppercase}}
            </mat-option>
          </mat-select>

        </mat-form-field> -->

        <!-- <mat-form-field>
          <input matInput placeholder="Edam" value="{{edamFilterValue!=null? edamFilterValue : ''}}" type="text"
            formControlName='label'>
        </mat-form-field> -->

        <!-- <button mat-raised-button type="submit" (click)='submitForm()' [disabled]="!search.valid" matTooltip="Go"
          matTooltipPosition="right">submit</button> -->
        <!-- </form> -->
        <!-- search will be hereeeeeeeeeeeeee -->
        <br />
        <form class="search-form">
            <mat-form-field class="form-full-width">
                <input matInput placeholder="Tool Name" value="" />
            </mat-form-field>

            <!-- <mat-form-field class="form-full-width">
                <textarea matInput placeholder="Leave a comment"></textarea>
            </mat-form-field> -->
        </form>
    </mat-sidenav>

    <mat-sidenav-content>
        <div class="table-outer-container">
            <div class="loading-shade" *ngIf="isLoadingResults">
                <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
            </div>

            <div class="table-container">
                <table mat-table [dataSource]="tools" multiTemplateDataRows>
                    <!-- Id Column -->
                    <ng-container matColumnDef="ID">
                        <th mat-header-cell *matHeaderCellDef>ID</th>
                        <td mat-cell *matCellDef="let row">{{ row.id }}</td>
                    </ng-container>

                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef>Name</th>
                        <td mat-cell *matCellDef="let row">
                            {{ row.entities[0].tools[0].name }}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="status">
                        <th mat-header-cell *matHeaderCellDef>Status</th>
                        <td mat-cell *matCellDef="let row">
                            {{ row.metrics.project.website.operational }}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="expandedDetail">
                        <td
                            mat-cell
                            *matCellDef="let element"
                            [attr.colspan]="displayedColumns.length"
                        >
                            <div
                                class="element-detail"
                                [@detailExpand]="
                                    element == expandedElement
                                        ? 'expanded'
                                        : 'collapsed'
                                "
                            >
                                <div>
                                    <p>
                                        {{ element.entities[0].tools[0].name }}
                                    </p>
                                    <p>
                                        {{
                                            element.entities[0].tools[0]
                                                .description
                                        }}
                                    </p>
                                    <a
                                        [href]="
                                            element.entities[0].tools[0].web
                                                .homepage
                                        "
                                    >
                                        {{
                                            element.entities[0].tools[0].web
                                                .homepage
                                        }}
                                    </a>
                                    <p>
                                        <span
                                            *ngFor="
                                                let entity of element.entities
                                            "
                                        >
                                            {{ entity.type }}
                                        </span>
                                    </p>
                                </div>
                            </div>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr
                        mat-row
                        *matRowDef="let element; columns: displayedColumns"
                        class="element-row"
                        [class.expanded-row]="expandedElement === element"
                        (click)="
                            expandedElement =
                                expandedElement === element ? null : element
                        "
                    ></tr>
                    <tr
                        mat-row
                        *matRowDef="let row; columns: ['expandedDetail']"
                        class="detail-row"
                    ></tr>
                </table>
            </div>

            <mat-paginator [length]="resultsLength" [pageSize]="20">
            </mat-paginator>
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>

<ng-template #loading>
    <mat-spinner></mat-spinner>
</ng-template>
<ng-template #noentriesfound>No entries found</ng-template>
